@namespace FhirBlaze.MedicationModule.Components

<EditForm Model="@Medication" OnValidSubmit="@SaveMedication">
  <DataAnnotationsValidator />
  <ValidationSummary />

    <div class="container">
        <div class="row">
          <div class="form-group col-sm">
            <label class="control-label" for="Id">Id</label>
            <InputText id="Id" disabled @bind-Value="Medication.Id" class="form-control" style="" />
          </div>
          <div class="form-group col-sm">
            <label class="control-label">Business Identifier(s)</label>
            @foreach(var item in this.Medication.Identifier)
            {
            <div>
              <input type="text" @bind="item.Value" class="form-control"/>
            </div>
            }
          </div>
        </div>

        <hr />

        <div class="row">
          <div class="form-group col-sm">
            <label class="control-label">Name</label>
            <div>
              <input type="text" @bind="this.MedicationName" placeholder="Name of the medication" class="form-control"/>
            </div>
          </div>
          <div class="form-group col-sm">
            <label class="control-label">Code</label>
            <div>
              @* <input type="text" @bind="this.MedicationCode" placeholder="SNOMED CT Medication Code" class="form-control"/> *@
              <select type="text" @bind="this.MedicationCode" class="form-control">
                @if (this.ValueSetCodes != null)
                {
                  @foreach (var item in this.ValueSetCodes.Compose.Include[0].Concept)
                  {
                    <option value="@item.Code">@item.Display</option>
                  }
                }
                else
                {
                  <option>No Medication to select</option>
                }
              </select>
            </div>
          </div>
          <div class="form-group col-sm">
            <label class="control-label">Form</label>
            <div>
              <input type="text" @bind="this.MedicationForm" placeholder="Physical description of the medication" class="form-control"/>
            </div>
          </div>
        </div>
    </div>

  @if (Processing)
  {
    <button type="button" class="btn btn-primary-outline" disabled>Processing</button>
  }
  else
  {
    <button type="submit" class="btn btn-primary">Save</button>
  }
</EditForm>
